# taskset

------

## 绑核
绑核就是设定某个进程/线程与某个CPU核的亲和力(affinity)。设定之后，Linux调度器就会让这个进程/线程只在所绑定的核上面去运行。但并不是说该进程/线程独占这个CPU的核，其他的进程/线程还是可以在这个核上线运行的。如果想要实现某个进程/线程独占某个核，就要使用cpuset命令去实现。


## 如何绑核
taskset用于将某个进程/线程绑定到CPU的某个或某几个核上面:
```
taskset -p pid
```
可以查看进程pid现在绑核的情况。

设置绑核的方法有两种:
+ 掩码形式
+ 列表形式


### 掩码形式的绑核
将该掩码转换为二进制形式 ，从最低位到最高位代表物理的#0,#1...#n号核。某位的值为0表示不绑该核，1表示绑。比如0x00000001的二进制为0000...0001，只有第0号核的位置是1，所以表示只绑0号核;0x00000003的二进制为0000...0011，第0号和第一号核位置是1，表示绑CPU的0号和1号核;再比如0xFFFFFFFF的二进制表示1111...1111，所有32个核的位置都是1，表示绑CPU的0-31核

需要注意的是，并非掩码中给出的CPU核就一定存在，比如0x00000400理论上代表CPU的第10号核，但是该核在真正计算机上面并不一定是存在的，而且，如果试图将物理上不存在的核绑定给某个进程，会返回错误。
掩码形式的绑核命令为:
```
taskset -p mask pid
```


### 列表形式
列表形式指直接指定要绑的CPU核的列表，列表中可以有一个或多个核。
```
taskset -cp cpu-list pid
```
其中cpu-list是数字化的cpu列表，从0开始。多个不连续的cpu可用逗号连接，连续的可用"-"连接，如0,2,5-8

只要taskset成功返回，那就表示绑核成功了，即该进程绑定到指定的核上面，而且taskset命令会显示原来的绑核情况，以及新的绑核情况






